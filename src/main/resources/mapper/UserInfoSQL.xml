<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SQL.UserInfo">
	<select id="getUserInfoList" resultType="userInfo"
		parameterType="userInfo">
		select * from userInfo
		<where>
			<if test="userNumber!=null"> and userNumber like '%'||#{userNumber}||'%'</if>
			<if test="userName!=null"> and username like '%'||#{userName}||'%'</if>
			<if test="userId!=null"> and userId like '%'||#{userId}||'%'</if>
			<if test="userPassword!=null"> and userPassword like '%'||#{userPassword}||'%'</if>
			<if test="userEmail!=null"> and userEmail like '%'||#{userEmail}||'%'</if>

			<if test="userPhoneNum!=null"> and userPhoneNum like '%'||#{userPhoneNum}||'%'</if>
			<if test="userSignUpDate!=null"> and userSignUpDate like '%'||#{userSignUpDate}||'%'</if>
			<if test="userAddress!=null"> and userAddress like '%'||#{userAddress}||'%'</if>
			<if test="userAddress2!=null"> and userAddress2 like '%'||#{userAddress2}||'%'</if>

			<if test="userLevel!=null"> and userLevel like '%'||#{userLevel}||'%'</if>
			<if test="userPoint!=null"> and userPoint like '%'||#{userPoint}||'%'</if>

			<if test="userCreditLevel!=null"> and userCreditLevel like '%'||#{userCreditLevel}||'%'
			</if>


			<if test="userImage!=null"> and userImage like '%'||#{userImage}||'%'</if>


		</where>
		order by userNumber
	</select>




	<select id="getUserInfo" resultType="userInfo">
		select * from userInfo
		<where>
			userNumber = #{userNumber}
		</where>
	</select>
	<insert id="insertUserInfo" parameterType="userInfo">
		insert into
		userInfo(userNumber,
		userName,
		userId,
		userPassword,
		userEmail,
		userNickName,
		userPhoneNum,
		userSignUpDate,
		userAddress,
		userAddress2,
		userLevel,
		userPoint,
		userCreditLevel,
		userImage
		)
		VALUES(SEQ_USERINFO_USERNUM.nextval,
		#{userName},
		#{userId},
		#{userPassword},
		#{userEmail},
		#{userNickName},
		#{userPhoneNum},
		to_char(SYSDATE,'YYYY-MM-DD'),
		#{userAddress},
		#{userAddress2},
		1,
		#{userPoint},
		5,
		#{userImage})


	</insert>
	<update id="updateUserInfo" parameterType="userInfo">
		update USERINFO
		<set>



			<if test="userName!=null">userName=#{userName},</if>
			<if test="userId!=null">userId=#{userId},</if>
			<if test="userPassword!=null">userPassword=#{userPassword},</if>
			<if test="userEmail!=null">userEmail=#{userEmail},</if>
			<if test="userNickName!=null">userNickName=#{userNickName},</if>

			<if test="userPhoneNum!=null">userPhoneNum=#{userPhoneNum},</if>

			<if test="userAddress!=null">userAddress=#{userAddress},</if>

			<if test="userAddress2!=null">userAddress2=#{userAddress2},</if>
			<if test="userLevel!=null">userLevel=#{userLevel},</if>
			<if test="userPoint!=null">userPoint=#{userPoint},</if>
			<if test="userCreditLevel!=null">userCreditLevel=#{userCreditLevel},</if>
			<if test="userImage!=null">userImage=#{userImage},</if>



		

		</set>
		where userNumber=#{userNumber}
	</update>
	<delete id="deleteUserInfo" parameterType="userInfo">
		delete from userInfo where userNumber=#{userNumber}
	</delete>
	<select id="login" resultType="userInfo">
		select * from userInfo where userId = #{userId} and userPassword =
		#{userPassword}
	</select>
	<update id="keepLogin">
		update userInfo set sessionKey = #{sessionId}, sessionLimit = #{next} where
		userId=#{userId}
	</update>

	<select id="getId" resultType="userInfo"
		parameterType="userInfo">
		select userId from userInfo
		<where>
			userName = #{userName} AND USERPHONENUM=#{userPhoneNum}
		</where>

	</select>
	<select id="getPassword" resultType="userInfo"
		parameterType="userInfo">
		select userPassword from userInfo
		<where>
			userName = #{userName} AND userPhoneNum=#{userPhoneNum} AND userId=#{userId}
		</where>

	</select>
	<select id="getLogin" resultType="userInfo"
		parameterType="userInfo">
		select userName,
		userNumber,
		userId,
		userNickName,
		userEmail,
		
		userPhoneNum,
		userSignUpDate,
		userAddress,
		userAddress2,
		userLevel,
		
		userPoint,
		userCreditLevel,
		userImage
		from userInfo
		<where>
			userId = #{userId} AND userPassword=#{userPassword}
		</where>
		
		
	</select>

</mapper>
